<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>France 24 + Puzzle Num√©rique</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #121212;
    color: #fff;
  }

  .container {
    display: flex;
    flex-wrap: wrap;
    height: 100vh;
  }

  .video-section, .puzzle-section {
    flex: 1 1 400px;
    min-width: 300px;
    padding: 10px;
    box-sizing: border-box;
  }

  iframe {
    width: 100%;
    height: 100%;
    border: none;
  }

  .puzzle {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-gap: 5px;
    max-width: 400px;
    margin: auto;
  }

  .tile {
    background: #4f46e5;
    color: #fff;
    font-size: 2em;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100px;
    cursor: pointer;
    user-select: none;
    border-radius: 8px;
    transition: background 0.2s;
  }

  .tile.empty {
    background: #1e1e1e;
    cursor: default;
  }

  @media (max-width: 700px) {
    .container {
      flex-direction: column;
    }
    .video-section, .puzzle-section {
      height: 50vh;
    }
  }
</style>
</head>
<body>

<div class="container">
  <!-- France 24 Section -->
  <div class="video-section">
    <iframe src="https://www.france24.com/fr/embed" allowfullscreen></iframe>
  </div>

  <!-- Puzzle Section -->
  <div class="puzzle-section">
    <h2 style="text-align:center;">Puzzle Num√©rique</h2>
    <div class="puzzle" id="puzzle"></div>
    <p style="text-align:center;"><button onclick="shufflePuzzle()">M√©langer</button></p>
  </div>
</div>

<script>
const puzzleContainer = document.getElementById('puzzle');
let tiles = [];

function createPuzzle() {
  tiles = [];
  for (let i = 1; i <= 8; i++) {
    tiles.push(i);
  }
  tiles.push(null); // case vide
  renderPuzzle();
}

function renderPuzzle() {
  puzzleContainer.innerHTML = '';
  tiles.forEach((num, index) => {
    const tile = document.createElement('div');
    tile.className = 'tile';
    if (num === null) {
      tile.classList.add('empty');
    } else {
      tile.textContent = num;
      tile.addEventListener('click', () => moveTile(index));
    }
    puzzleContainer.appendChild(tile);
  });
}

function moveTile(index) {
  const emptyIndex = tiles.indexOf(null);
  const validMoves = [emptyIndex - 3, emptyIndex + 3];
  if (emptyIndex % 3 !== 0) validMoves.push(emptyIndex - 1);
  if (emptyIndex % 3 !== 2) validMoves.push(emptyIndex + 1);

  if (validMoves.includes(index)) {
    [tiles[emptyIndex], tiles[index]] = [tiles[index], tiles[emptyIndex]];
    renderPuzzle();
    checkWin();
  }
}

function shufflePuzzle() {
  for (let i = 0; i < 1000; i++) {
    const emptyIndex = tiles.indexOf(null);
    const possibleMoves = [];
    if (emptyIndex % 3 !== 0) possibleMoves.push(emptyIndex - 1);
    if (emptyIndex % 3 !== 2) possibleMoves.push(emptyIndex + 1);
    if (emptyIndex - 3 >= 0) possibleMoves.push(emptyIndex - 3);
    if (emptyIndex + 3 < 9) possibleMoves.push(emptyIndex + 3);
    const move = possibleMoves[Math.floor(Math.random() * possibleMoves.length)];
    [tiles[emptyIndex], tiles[move]] = [tiles[move], tiles[emptyIndex]];
  }
  renderPuzzle();
}

function checkWin() {
  for (let i = 0; i < 8; i++) {
    if (tiles[i] !== i + 1) return;
  }
  alert('üéâ F√©licitations ! Puzzle termin√© !');
}

createPuzzle();
</script>

</body>
</html>
